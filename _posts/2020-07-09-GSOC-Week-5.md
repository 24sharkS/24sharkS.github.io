---
published: false
---
## Automated Generation of R wrapper for libcpp_test

This week was awesome as I successfully created a prototype of modified autowrap which generates R code that wraps some important sections of libcpp_test like **overloaded constructors**, **object attributes**, getter & setter functions for attributes as a single [active binding](https://collinerickson.github.io/2018/01/10/using-active-bindings-in-r6-classes/)in R6 class, conversion providers for basic types like void, integer, float, enum, character, cpp class object and also stl containers like pair and set. It also takes into consideration the autowrap directives  when generating R code.Support for pass by reference argument is also there. Currently supported directives are:

> wrap-ignore, 
wrap-pass-constructor, 
wrap-doc (injection of R specific comments), 
wrap-as & wrap-constant

Note that we cannot incorporate all the directives, as some are specifically for C++ to python wrapping whereas in our R code we are working with a wrapped python object. For example - **#wrap-hash** directive is not required, as the wrapped python object is already hashable and using reticulate we can directly compare such python objects for equality.

For now, converters for nested data structures(vector & map, wrappers for templated classes, static and free functions are also not provided. 

### R Code Generation
The modified version of autowrap aimed at automated production of R wrappers from pxd declarations is hosted [here](https://github.com/24sharkS/autowrap-1).

In the ```.\autowrap``` folder there are two files **py_libcpp_test.R** and **libcpp_test.R**. The former is automatically generated while the latter contains manually written R wrappers.

We can generate the R wrapper code corresponding to any pxd declaration file using the command:

```	autowrap --out output.R input.pxd``` 

where we can specify the relative path of our pxd file and out.R will be the name of the file containing wrapper R code.

The produced R file imports all the necessary R packages and creates object to access required python modules using ```reticulate::import()```.

### Overloaded Constructors
Through the below example, we can get a good idea how constructor overloading is being handled in R.

![]({{site.baseurl}}/images/pycharm64_OCgV0GmQPk.png)


Here, we have a main constructor **initialize** which calls two different functions - init_0 & init_1 depending on the argument length and size. It calls init_0 when the argument is integer, else it calls init_1 when the argument is an R6 object of Int class. An error is thrown whenever a wrong argument is provided. It also does type checking inside the two functions.






